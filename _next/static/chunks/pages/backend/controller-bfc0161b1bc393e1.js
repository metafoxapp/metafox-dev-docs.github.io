(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82],{5394:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backend/controller",function(){return s(9254)}])},979:function(e,n,s){"use strict";var o=s(5893);let r={logo:(0,o.jsx)("img",{src:"/logo.png",alt:"document",height:"32px",width:112}),logoLink:"/",chat:{},docsRepositoryBase:"https://github.com/metafoxapp/metafox-dev-docs/blob/develop",project:{link:"https://github.com/metafoxapp/metafox-dev-docs"},sidebar:{defaultMenuCollapseLevel:1},useNextSeoProps:()=>({titleTemplate:"%s - MetaFox"}),head:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,o.jsx)("meta",{property:"og:title",content:"MetaFox"}),(0,o.jsx)("meta",{property:"og:description",content:"MetaFox Developer Documentation"})]}),footer:{text:(0,o.jsxs)("span",{children:["Copyright \xa9 2023 \xa0",(0,o.jsx)("a",{href:"https://phpfox.com",target:"_blank",children:"YouNet Social"}),". All rights reserved."]})}};n.Z=r},9254:function(e,n,s){"use strict";s.r(n);var o=s(5893),r=s(2673),t=s(4090),l=s(979);s(9966);var a=s(1151);s(5675);let i={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"src/pages/backend/controller.mdx",route:"/backend/controller",frontMatter:{name:"Controller",menu:"Backend",route:"/backend/controller"},headings:[{depth:1,value:"Controller",id:"controller"},{depth:2,value:"API Fallback",id:"api-fallback"},{depth:2,value:"API Controller",id:"api-controller"},{depth:2,value:"HTTP Request",id:"http-request"}],pageMap:[{kind:"Meta",data:{index:"Getting Started",backend:"Backend",frontend:"Frontend",mobile:"Mobile","---":{type:"separator"},"new-app":"New App","new-theme":"New Theme","new-language":"New Language"}},{kind:"Folder",name:"backend",route:"/backend",children:[{kind:"Meta",data:{category:"Category",commands:"Commands",content:"Content",controller:"Controller",datagrid:"Datagrid",eloquent:"Eloquent","event-list":"Support Events",event:"Event",form:"Form Builder",installation:"Installation",mailer:"Mailer",package:"Package",routing:"Routing",structure:"Directory Struture",interfaces:"Interfaces"}},{kind:"MdxPage",name:"category",route:"/backend/category",frontMatter:{route:"/backend/category",name:"Category",menu:"Backend"}},{kind:"MdxPage",name:"commands",route:"/backend/commands",frontMatter:{route:"/backend/appendix/commands",name:"Commands",menu:"Backend"}},{kind:"MdxPage",name:"content",route:"/backend/content",frontMatter:{route:"/backend/content",name:"Content",menu:"Backend"}},{kind:"MdxPage",name:"controller",route:"/backend/controller",frontMatter:{name:"Controller",menu:"Backend",route:"/backend/controller"}},{kind:"MdxPage",name:"datagrid",route:"/backend/datagrid",frontMatter:{route:"/backend/datagrid",name:"DataGrid",menu:"Backend"}},{kind:"MdxPage",name:"eloquent",route:"/backend/eloquent",frontMatter:{name:"Eloquent",menu:"Backend",route:"/backend/eloquent"}},{kind:"MdxPage",name:"event-list",route:"/backend/event-list",frontMatter:{name:"Event List",menu:"Backend"}},{kind:"MdxPage",name:"event",route:"/backend/event",frontMatter:{route:"/backend/event",name:"Event",menu:"Backend"}},{kind:"MdxPage",name:"form",route:"/backend/form",frontMatter:{route:"/backend/form",name:"Forms",menu:"Backend"}},{kind:"MdxPage",name:"installation",route:"/backend/installation",frontMatter:{name:"Installation",route:"/backend/installation",menu:"Backend"}},{kind:"MdxPage",name:"interfaces",route:"/backend/interfaces"},{kind:"MdxPage",name:"mailer",route:"/backend/mailer",frontMatter:{route:"/backend/mailer",name:"Mailer",menu:"Backend"}},{kind:"MdxPage",name:"package",route:"/backend/package",frontMatter:{name:"Package",menu:"Backend",route:"/backend/package"}},{kind:"MdxPage",name:"routing",route:"/backend/routing",frontMatter:{name:"Routing",menu:"Backend",route:"/backend/routing"}},{kind:"MdxPage",name:"structure",route:"/backend/structure",frontMatter:{route:"/backend/structure",name:"Structure",menu:"Backend"}}]},{kind:"Folder",name:"frontend",route:"/frontend",children:[{kind:"Meta",data:{concepts:"Concepts",cookie:"Cookie",dialog:"Dialog",form:"Form Builder",gridview:"Grid View",index:"Home",layout:"Layouts","local-store":"Local Store",routing:"Routing",sagas:"Sagas",service:"Service",theme:"Theme",typings:"Typings",validation:"Validation","when-lib":"When Lib",translation:"Translation"}},{kind:"MdxPage",name:"concepts",route:"/frontend/concepts"},{kind:"MdxPage",name:"cookie",route:"/frontend/cookie",frontMatter:{route:"/frontend/cookie",name:"Cookie",menu:"Frontend"}},{kind:"MdxPage",name:"dialog",route:"/frontend/dialog"},{kind:"MdxPage",name:"form",route:"/frontend/form"},{kind:"MdxPage",name:"gridview",route:"/frontend/gridview",frontMatter:{menu:"Frontend",route:"/frontend/gridview"}},{kind:"MdxPage",name:"index",route:"/frontend",frontMatter:{menu:"Frontend",route:"/frontend",name:"Getting Started"}},{kind:"MdxPage",name:"layout",route:"/frontend/layout"},{kind:"MdxPage",name:"local-store",route:"/frontend/local-store",frontMatter:{route:"/frontend/local-store",name:"Local Storage",menu:"Frontend"}},{kind:"MdxPage",name:"routing",route:"/frontend/routing",frontMatter:{route:"/frontend/router",name:"Router",menu:"Frontend"}},{kind:"MdxPage",name:"sagas",route:"/frontend/sagas",frontMatter:{route:"/frontend/sagas",name:"sagas",menu:"Frontend"}},{kind:"MdxPage",name:"service",route:"/frontend/service",frontMatter:{route:"/frontend/service",name:"service",menu:"Frontend"}},{kind:"MdxPage",name:"theme",route:"/frontend/theme",frontMatter:{route:"/frontend/theme",name:"Theme",menu:"Frontend"}},{kind:"MdxPage",name:"translation",route:"/frontend/translation",frontMatter:{route:"/frontend/translation",name:"service",menu:"Frontend"}},{kind:"MdxPage",name:"typings",route:"/frontend/typings",frontMatter:{name:"Typescript",menu:"Frontend"}},{kind:"MdxPage",name:"validation",route:"/frontend/validation",frontMatter:{menu:"Frontend",route:"/frontend/validation",name:"Validation"}},{kind:"MdxPage",name:"when-lib",route:"/frontend/when-lib",frontMatter:{menu:"Frontend",route:"/frontend/when",name:"Validation"}}]},{kind:"MdxPage",name:"index",route:"/",frontMatter:{route:"/",name:"Getting Started"}},{kind:"Folder",name:"mobile",route:"/mobile",children:[{kind:"Meta",data:{flatlist:"FlatList View",layout:"Layouts",reducers:"Reducers",sagas:"Sagas",service:"Services",translation:"Translation",router:"Router",translations:"Translations"}},{kind:"MdxPage",name:"flatlist",route:"/mobile/flatlist",frontMatter:{route:"/mobile/flatlist",hidden:!0}},{kind:"MdxPage",name:"layout",route:"/mobile/layout",frontMatter:{route:"/mobile/layout",hidden:!0}},{kind:"MdxPage",name:"reducers",route:"/mobile/reducers",frontMatter:{route:"/mobile/reducers",hidden:!0}},{kind:"MdxPage",name:"router",route:"/mobile/router",frontMatter:{hidden:!0,route:"/mobile/router"}},{kind:"MdxPage",name:"sagas",route:"/mobile/sagas",frontMatter:{hidden:!0,route:"/mobile/sagas"}},{kind:"MdxPage",name:"service",route:"/mobile/service",frontMatter:{hidden:!0,route:"/mobile/services"}},{kind:"MdxPage",name:"translations",route:"/mobile/translations",frontMatter:{hidden:!0,route:"/mobile/translations"}}]},{kind:"MdxPage",name:"new-app",route:"/new-app",frontMatter:{name:"Example",route:"/example/"}},{kind:"MdxPage",name:"new-language",route:"/new-language",frontMatter:{route:"/language",name:"Language"}},{kind:"MdxPage",name:"new-theme",route:"/new-theme"}],flexsearch:{codeblocks:!0},title:"Controller"},pageNextRoute:"/backend/controller",nextraLayout:t.ZP,themeConfig:l.Z};function c(e){let n=Object.assign({h1:"h1",p:"p",em:"em",code:"code",pre:"pre",span:"span",a:"a",h2:"h2"},(0,a.ah)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{children:"Controller"}),"\n",(0,o.jsxs)(n.p,{children:["Controllers can help group related request handling logic into a single class. ",(0,o.jsx)(n.em,{children:"Controller"})," classes are located under ",(0,o.jsx)(n.code,{children:"src\\Http\\Controllers"})," directory within your package directory."]}),"\n",(0,o.jsxs)(n.p,{children:["Here is the directory structure of the ",(0,o.jsx)(n.code,{children:"metafox\\blog"})," app"]}),"\n",(0,o.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,o.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"packages/"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  metafox/"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    blog/"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      src/"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        Http/"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"          Controllers/             "})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"            Api/                   // Contains API Gateway classes"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"              BlogController.php"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"              CategoryController.php"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"              v1/                  // Contains Controller classes for certain version"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                BlogController.php"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                CategoryController.php"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"              v2/                  // Contains Controller classes for certain version"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                BlogController.php"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"             "})})]})}),"\n",(0,o.jsxs)(n.p,{children:["Next step, we are going to take a deeper look into the ",(0,o.jsx)(n.em,{children:"Gateway"})," class, the ",(0,o.jsx)(n.code,{children:"BlogController"})," at ",(0,o.jsx)(n.code,{children:"src/Http/Controllers/Api/BlogController.php"}),", which is extended from the abstract class ",(0,o.jsx)(n.code,{children:"GatewayController"}),","]}),"\n",(0,o.jsx)(n.pre,{"data-language":"php","data-theme":"default",children:(0,o.jsxs)(n.code,{"data-language":"php","data-theme":"default",children:[(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"<?"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"php"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:" "}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"namespace"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"MetaFox"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Blog"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Http"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Controllers"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Api"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:" "}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"use"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"MetaFox"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"Platform"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"Http"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"Controllers"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"Api"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"GatewayController"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:" "}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"/**"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" * --------------------------------------------------------------------------"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" *  API Gateway"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" * --------------------------------------------------------------------------."})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" *"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" * This class solves API versioning problem."})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" * DO NOT IMPLEMENT ACTION HERE."})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" */"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:" "}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"/**"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" * Class CategoryController."})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" */"})}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"BlogController"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"extends"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"GatewayController"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"/**"})]}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"     * "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"@var"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"string[]"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"     */"})}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"protected"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" $controllers "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ["})]}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'v1'"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"v1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"BlogController"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"::class"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'v2'"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"v2"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"BlogController"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"::class"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    ];"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:" "}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// DO NOT IMPLEMENT ACTION HERE."})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"BlogController"})," class defines its property ",(0,o.jsx)(n.code,{children:"controllers"})," to associate 2 versions with 2 different ",(0,o.jsx)(n.code,{children:"BlogController"})," classes."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"GatewayController"})," class supports parsing the ",(0,o.jsx)(n.code,{children:"ver"})," parameter from ",(0,o.jsx)(n.a,{href:"/backend/routing#api-versioning",children:"routing"})," and invoking the respective ",(0,o.jsx)(n.em,{children:"Controller"})," class associated with that version"]}),"\n",(0,o.jsxs)(n.p,{children:["For example, with the route ",(0,o.jsx)(n.code,{children:"/api/v1/blog/18"}),", routing resolves to ",(0,o.jsx)(n.code,{children:"MetaFox\\Blog\\Http\\Controllers\\Api\\BlogController::show"})," with parameters ",(0,o.jsx)(n.code,{children:"ver=v1"})," and ",(0,o.jsx)(n.code,{children:"id=18"}),", ",(0,o.jsx)(n.code,{children:"GatewayController"})," class is dispatched with the same ",(0,o.jsx)(n.code,{children:"show"})," method, then forward the dispatched call to ",(0,o.jsx)(n.code,{children:"v1/BlogController::show"})," method."]}),"\n",(0,o.jsx)(n.h2,{id:"api-fallback",children:"API Fallback"}),"\n",(0,o.jsxs)(n.p,{children:["If a method isn't defined in the ",(0,o.jsx)(n.em,{children:"Controller"})," class of certain version, the call will be dispatched to the class method of the previous version."]}),"\n",(0,o.jsxs)(n.p,{children:["For example with the route ",(0,o.jsx)(n.code,{children:"/api/v2/blog/18"}),", routing resolves ",(0,o.jsx)(n.code,{children:"MetaFox\\Blog\\Http\\Controllers\\Api\\BlogController::show"})," with parameters ",(0,o.jsx)(n.code,{children:"ver=v2"})," and ",(0,o.jsx)(n.code,{children:"id=18"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"GatewayController"})," class will try to dispatch the call with the same ",(0,o.jsx)(n.code,{children:"show"})," method with parameters of ",(0,o.jsx)(n.code,{children:"ver=v2"})," and ",(0,o.jsx)(n.code,{children:"id=18"})," in ",(0,o.jsx)(n.code,{children:"v2\\BlogController"})," class as normal. But if there are no ",(0,o.jsx)(n.code,{children:"show"})," methods in ",(0,o.jsx)(n.code,{children:"v2\\BlogController"})," class, the call will be forwarded to ",(0,o.jsx)(n.code,{children:"v1\\BlogController::show"})," method."]}),"\n",(0,o.jsx)(n.h2,{id:"api-controller",children:"API Controller"}),"\n",(0,o.jsxs)(n.p,{children:["In this section, we will see how the ",(0,o.jsx)(n.em,{children:"Controller"})," classes of certain API version are defined for main action controllers."]}),"\n",(0,o.jsxs)(n.p,{children:["Below is the sample ",(0,o.jsx)(n.code,{children:"BlogController"})," class of version ",(0,o.jsx)(n.code,{children:"v1"}),". This class is located under ",(0,o.jsx)(n.code,{children:"src/Http/Controllers/Api/v1/BlogController.php"})]}),"\n",(0,o.jsx)(n.pre,{"data-language":"php","data-theme":"default",children:(0,o.jsxs)(n.code,{"data-language":"php","data-theme":"default",children:[(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"<?"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"php"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:" "}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// define namespace"})}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"namespace"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"MetaFox"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Blog"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Http"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Controllers"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Api"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"v1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:" "}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"/**"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" * Class BlogController."})}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"@ignore"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" * @codeCoverageIgnore"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" */"})}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"BlogController"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"/**"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"     * View Blog"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"     *"})}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"     * "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" $id"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"     *"})}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"     * "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"@return"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"BlogDetail"})]}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"     * "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"@throws"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"AuthenticationException"})]}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"     * "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"@throws"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"AuthorizationException"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"     */"})}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"public"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"show"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" $id)"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"BlogDetail"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    {"})}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        $blog "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"$this"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"repository"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"viewBlog"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"user"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(),"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" $id"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:" "}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"BlogDetail"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"($blog);"})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:" "}),"\n",(0,o.jsxs)(n.span,{className:"line",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// define other methods."})]}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,o.jsx)(n.h2,{id:"http-request",children:"HTTP Request"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.em,{children:"HTTP Request"})," classes of an app are located under ",(0,o.jsx)(n.code,{children:"src/Http/Requests"})," directory. Here is the directory structure of the ",(0,o.jsx)(n.code,{children:"metafox\\blog"})," app"]}),"\n",(0,o.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,o.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"packages/"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  metafox/"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    blog/"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      src/"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        Http/"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"          Requests/"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"            v1/                       // contain Requests class for Api version `v1`"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"              Blog/                   // For blog content"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                IndexRequest.php      // for browsing blog request"})}),"\n",(0,o.jsx)(n.span,{className:"line",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                EditFormRequest.php   // for edit form request"})})]})}),"\n",(0,o.jsxs)(n.p,{children:["You can read more about Laravel Docs about ",(0,o.jsx)(n.a,{href:"https://laravel.com/docs/9.x/requests",children:"HTTP Request"})," and ",(0,o.jsx)(n.a,{href:"https://laravel.com/docs/9.x/responses",children:"HTTP Responses"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"/backend/eloquent",children:"Next Chapter: Eloquent"})})]})}n.default=(0,r.j)(i)}},function(e){e.O(0,[774,239,888,179],function(){return e(e.s=5394)}),_N_E=e.O()}]);