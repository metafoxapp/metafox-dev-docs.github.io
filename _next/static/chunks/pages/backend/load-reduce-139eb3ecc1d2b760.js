(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7316],{801:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backend/load-reduce",function(){return n(3832)}])},3832:function(e,s,n){"use strict";n.r(s),n.d(s,{__toc:function(){return a}});var r=n(5893),o=n(2673),l=n(5759),i=n(3114);n(7954);var t=n(2643);let a=[{depth:2,value:"Register",id:"register"},{depth:2,value:"Sample",id:"sample"},{depth:2,value:"Best practise",id:"best-practise"},{depth:2,value:"core_item_statstitic",id:"core_item_statstitic"}];function c(e){let s=Object.assign({h1:"h1",p:"p",h2:"h2",pre:"pre",code:"code",span:"span"},(0,t.a)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{children:"Load Reduce"}),"\n",(0,r.jsx)(s.p,{children:"Reducing number of database queries using array cache (cache lifetime within request lifecycle)."}),"\n",(0,r.jsx)(s.h2,{id:"register",children:"Register"}),"\n",(0,r.jsx)(s.p,{children:"Register reducer"}),"\n",(0,r.jsx)(s.pre,{"data-language":"php","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"php","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"PackageServiceProvider"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"extends"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"ServiceProvider"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"/**"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"     * Register the service provider."})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"     *"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"     * "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"@return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"void"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"     */"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"public"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"register"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    {"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"$this"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"callAfterResolving"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'reducer'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($reducer) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            $reducer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"register"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"["})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"MetaFox"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Saved"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Support"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"LoadMissingIsSaved"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"::class"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            ]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "})]})}),"\n",(0,r.jsx)(s.h2,{id:"sample",children:"Sample"}),"\n",(0,r.jsx)(s.p,{children:"Using union to pick data"}),"\n",(0,r.jsx)(s.pre,{"data-language":"php","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"php","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<?"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"php"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"namespace"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MetaFox"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Saved"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Support"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"use"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Illuminate"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Database"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Eloquent"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Builder"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"use"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Illuminate"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Support"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Facades"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"DB"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"use"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"MetaFox"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Platform"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Contracts"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"HasSavedItem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"use"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"MetaFox"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Platform"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Contracts"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"User"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"use"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"MetaFox"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Platform"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"LoadReduce"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Reducer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"LoadMissingIsSaved"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"/**"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"     * "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"User"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"       $context"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"     * "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Reducer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    $reducer"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"     * "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"@return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"array"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"|"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"null"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"     */"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"public"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"after"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"($context"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $reducer)"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?array"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    {"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        $userId "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $context"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"userId"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        $items  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $reducer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"entities"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"filter"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"fn"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($x) => $x "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"instanceof"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"HasSavedItem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $x"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"entityType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!=="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'feed'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"map"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"fn"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($x) => [$x"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"entityType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(),"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $x"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"entityId"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($items"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"isEmpty"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"null"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        $key "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"fn"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $id) => "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"sprintf"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'saved::exists(user:%s,%s:%s)'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" $userId"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" $type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" $id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        $data "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $items"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"reduce"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($carry"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $x) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"use"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($key) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            $carry["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"$key"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"($x["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $x["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"])] "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"false"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $carry;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"/** "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"@var"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Builder"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:" $query */"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        $query "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $items"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"map"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($x) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"use"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($userId) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"DB"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"table"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'saved_items'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"select"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'item_id'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'item_type'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"where"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"["})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'user_id'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $userId"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'item_type'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $x["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'item_id'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $x["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                ]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"limit"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"reduce"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($carry"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $x) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $carry "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $carry"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"union"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"$x"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $x;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $query"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"get"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"reduce"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($carry"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $x) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"use"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($key) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                $carry["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"$key"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"($x"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"item_type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $x"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"item_id)] "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $carry;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.p,{children:"Check is saved"}),"\n",(0,r.jsx)(s.pre,{"data-language":"php","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"php","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"IsSavedItem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"implements"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"PolicyRuleInterface"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"public"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"check"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $entityType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"User"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $user"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $resource"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $newValue "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"null"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?bool"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    {"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"$resource "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"instanceof"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"HasSavedItem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"false"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"LoadReduce"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"remember"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"sprintf"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'saved::exists(user:%s,%s:%s)'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" $user"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"userId"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(),"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" $resource"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"entityType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(),"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" $resource"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"entityId"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()),"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"fn"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" () => "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"resolve"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"SavedRepositoryInterface"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"::class"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"checkIsSaved"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                $user"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"userId"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(),"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                $resource"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"entityId"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(),"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                $resource"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"entityType"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h2,{id:"best-practise",children:"Best practise"}),"\n",(0,r.jsx)(s.pre,{"data-language":"php","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"php","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// DON'T use eager loading for finding one. It's can duplicate query."})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"$blog "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"$this"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"with"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'user'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'userEntity'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'categories'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'activeCategories'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'attachments'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"find"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"$id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "})]})}),"\n",(0,r.jsx)(s.h2,{id:"core_item_statstitic",children:"core_item_statstitic"}),"\n",(0,r.jsx)(s.p,{children:"Sample migration total pending comments"}),"\n",(0,r.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INSERT INTO"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" core_item_statistics (item_id, item_type)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" A.item_id, A.item_type"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" comments "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" A"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"         "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"LEFT JOIN"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" core_item_statistics "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" A.item_id "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B.item_id "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" A.item_type "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B.item_type"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B.item_type "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"is"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"null"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"GROUP BY"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" A.item_id, A.item_type;"})]})]})}),"\n",(0,r.jsx)(s.p,{children:"postgres"}),"\n",(0,r.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WITH"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SELECT"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" item_id, item_type, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"count"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"aggregate"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" comments"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" is_approved "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"             "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" parent_id "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"GROUP BY"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" item_id, item_type)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"UPDATE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" core_item_statistics "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" A"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SET"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" total_pending_comment "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B.aggregate"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FROM"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"WHERE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B.item_id "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" A.item_id"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"AND"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B.item_type "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" A.item_type;"})]})]})}),"\n",(0,r.jsx)(s.p,{children:"MySql"}),"\n",(0,r.jsx)(s.pre,{"data-language":"sql","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"UPDATE"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" core_item_statistics A"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INNER JOIN"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"select"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" item_id, item_type, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"count"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"aggregate"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" comments"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"where"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" is_approved"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"and"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" parent_id "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"group by"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" item_id, item_type"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(B.item_id "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" A.item_id "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"and"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B.item_type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"A.item_type)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"SET"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" A.total_pending_comment "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" B.aggregate"})]})]})}),"\n",(0,r.jsx)(s.p,{children:"Depends on database driver to run migration scripts"}),"\n",(0,r.jsx)(s.pre,{"data-language":"php","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"php","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"use"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Illuminate"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Support"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Facades"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"\\"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"DB"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"$driver "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"DB"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getDriverName"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($driver "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'pgsql'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"DB"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"statement"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"$sql"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"} "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"elseif"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($driver "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'mysql'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  $sql;"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,t.a)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"src/pages/backend/load-reduce.mdx",route:"/backend/load-reduce",timestamp:1697012211e3,pageMap:[{kind:"Meta",data:{index:"Getting Started",backend:"Backend",frontend:"Frontend",mobile:"Mobile","---1":{type:"separator"},"new-app":"New App","new-theme":{title:"New Theme"},"export-package":{title:"Export Package",display:"hidden"},"new-language":"New Language","---2":{type:"separator"},"rest-api":{title:"RESTful API",href:"https://dev-docs.metafoxapp.com/rest-api",newWindow:!0},postman:{title:"Postman Collection",href:"https://dev-docs.metafoxapp.com/rest-api/collection.json",newWindow:!0},"open-api":{title:"OpenAPI Spec",href:"https://dev-docs.metafoxapp.com/rest-api/openapi.yaml",newWindow:!0},"php-api":{title:"Class References",href:"https://dev-docs.metafoxapp.com/php-api",newWindow:!0},"---3":{type:"separator"},community:{title:"Community",href:"https://community.phpfox.com/forum",newWindow:!0},demo:{title:"Demo Site",href:"https://demo.metafox.app",newWindow:!0},store:{title:"AppStore",href:"https://appstore.phpfox.com",newWindow:!0},user:{href:"https://docs.phpfox.com/",title:"User Manuals",newWindow:!0},client:{href:"https://clients.phpfox.com/",title:"Client Area",newWindow:!0},developer:{href:"https://www.phpfox.com/developers/",title:"Developer Program",newWindow:!0}}},{kind:"Folder",name:"backend",route:"/backend",children:[{kind:"Meta",data:{installation:"Installation",structure:"Directory Structure",commands:"Commands",package:"Package",controller:"Controller",eloquent:"Eloquent",datagrid:"Datagrid",content:"Content",category:"Category",event:"Event","event-list":"Support Events",form:"Form Builder",mailer:"Mailer",routing:"Routing",interfaces:"Interfaces","load-reduce":"Load Reduce",octane:"Octane"}},{kind:"MdxPage",name:"category",route:"/backend/category",frontMatter:{route:"/backend/category",name:"Category",menu:"Backend"}},{kind:"MdxPage",name:"commands",route:"/backend/commands",frontMatter:{route:"/backend/appendix/commands",name:"Commands",menu:"Backend"}},{kind:"MdxPage",name:"content",route:"/backend/content",frontMatter:{route:"/backend/content",name:"Content",menu:"Backend"}},{kind:"MdxPage",name:"controller",route:"/backend/controller",frontMatter:{name:"Controller",menu:"Backend",route:"/backend/controller"}},{kind:"MdxPage",name:"datagrid",route:"/backend/datagrid"},{kind:"MdxPage",name:"eloquent",route:"/backend/eloquent",frontMatter:{name:"Eloquent",menu:"Backend",route:"/backend/eloquent"}},{kind:"MdxPage",name:"event-list",route:"/backend/event-list",frontMatter:{name:"Event List",menu:"Backend"}},{kind:"MdxPage",name:"event",route:"/backend/event",frontMatter:{route:"/backend/event",name:"Event",menu:"Backend"}},{kind:"MdxPage",name:"form",route:"/backend/form",frontMatter:{route:"/backend/form",name:"Forms",menu:"Backend"}},{kind:"MdxPage",name:"installation",route:"/backend/installation",frontMatter:{name:"Installation",route:"/backend/installation",menu:"Backend"}},{kind:"MdxPage",name:"interfaces",route:"/backend/interfaces"},{kind:"MdxPage",name:"load-reduce",route:"/backend/load-reduce"},{kind:"MdxPage",name:"mailer",route:"/backend/mailer",frontMatter:{route:"/backend/mailer",name:"Mailer",menu:"Backend"}},{kind:"MdxPage",name:"octane",route:"/backend/octane"},{kind:"MdxPage",name:"package",route:"/backend/package",frontMatter:{name:"Package",menu:"Backend",route:"/backend/package"}},{kind:"MdxPage",name:"routing",route:"/backend/routing",frontMatter:{name:"Routing",menu:"Backend",route:"/backend/routing"}},{kind:"MdxPage",name:"structure",route:"/backend/structure",frontMatter:{route:"/backend/structure",name:"Structure",menu:"Backend"}}]},{kind:"MdxPage",name:"export-package",route:"/export-package"},{kind:"Folder",name:"frontend",route:"/frontend",children:[{kind:"Meta",data:{concepts:"Concepts",cookie:"Cookie",dialog:"Dialog",form:"Form Builder",gridview:"Grid View",home:"Get Started",layout:"Layouts","local-store":"Local Store",routing:"Routing",sagas:"Sagas",service:"Service",theme:"Theme",typings:"Typings",validation:"Validation","when-lib":"When Lib",translation:"Translation"}},{kind:"MdxPage",name:"concepts",route:"/frontend/concepts"},{kind:"MdxPage",name:"cookie",route:"/frontend/cookie",frontMatter:{route:"/frontend/cookie",name:"Cookie",menu:"Frontend"}},{kind:"MdxPage",name:"dialog",route:"/frontend/dialog"},{kind:"MdxPage",name:"form",route:"/frontend/form"},{kind:"MdxPage",name:"gridview",route:"/frontend/gridview",frontMatter:{menu:"Frontend",route:"/frontend/gridview"}},{kind:"MdxPage",name:"home",route:"/frontend/home"},{kind:"MdxPage",name:"layout",route:"/frontend/layout"},{kind:"MdxPage",name:"local-store",route:"/frontend/local-store",frontMatter:{route:"/frontend/local-store",name:"Local Storage",menu:"Frontend"}},{kind:"MdxPage",name:"routing",route:"/frontend/routing",frontMatter:{route:"/frontend/router",name:"Router",menu:"Frontend"}},{kind:"MdxPage",name:"sagas",route:"/frontend/sagas",frontMatter:{route:"/frontend/sagas",name:"sagas",menu:"Frontend"}},{kind:"MdxPage",name:"service",route:"/frontend/service",frontMatter:{route:"/frontend/service",name:"service",menu:"Frontend"}},{kind:"MdxPage",name:"theme",route:"/frontend/theme",frontMatter:{route:"/frontend/theme",name:"Theme",menu:"Frontend"}},{kind:"MdxPage",name:"translation",route:"/frontend/translation",frontMatter:{route:"/frontend/translation",name:"service",menu:"Frontend"}},{kind:"MdxPage",name:"typings",route:"/frontend/typings",frontMatter:{name:"Typescript",menu:"Frontend"}},{kind:"MdxPage",name:"validation",route:"/frontend/validation",frontMatter:{menu:"Frontend",route:"/frontend/validation",name:"Validation"}},{kind:"MdxPage",name:"when-lib",route:"/frontend/when-lib",frontMatter:{menu:"Frontend",route:"/frontend/when",name:"Validation"}}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"mobile",route:"/mobile",children:[{kind:"Meta",data:{flatlist:"FlatList View",layout:"Layouts",reducers:"Reducers",sagas:"Sagas",service:"Services",translation:"Translation",router:"Router",translations:"Translations"}},{kind:"MdxPage",name:"flatlist",route:"/mobile/flatlist",frontMatter:{route:"/mobile/flatlist",hidden:!0}},{kind:"MdxPage",name:"layout",route:"/mobile/layout",frontMatter:{route:"/mobile/layout",hidden:!0}},{kind:"MdxPage",name:"reducers",route:"/mobile/reducers",frontMatter:{route:"/mobile/reducers",hidden:!0}},{kind:"MdxPage",name:"router",route:"/mobile/router",frontMatter:{hidden:!0,route:"/mobile/router"}},{kind:"MdxPage",name:"sagas",route:"/mobile/sagas",frontMatter:{hidden:!0,route:"/mobile/sagas"}},{kind:"MdxPage",name:"service",route:"/mobile/service",frontMatter:{hidden:!0,route:"/mobile/services"}},{kind:"MdxPage",name:"translations",route:"/mobile/translations",frontMatter:{hidden:!0,route:"/mobile/translations"}}]},{kind:"MdxPage",name:"new-app",route:"/new-app"},{kind:"MdxPage",name:"new-language",route:"/new-language",frontMatter:{route:"/language",name:"Language"}},{kind:"MdxPage",name:"new-theme",route:"/new-theme"}],flexsearch:{codeblocks:!0},title:"Load Reduce",headings:a},pageNextRoute:"/backend/load-reduce",nextraLayout:l.ZP,themeConfig:i.Z};s.default=(0,o.j)(h)},3114:function(e,s,n){"use strict";var r=n(5893),o=n(7294),l=n(1785),i=n.n(l);let t={logo:(0,r.jsx)("img",{src:"/logo.png",alt:"document",height:"32px",width:112}),logoLink:"/",chat:{},docsRepositoryBase:"https://github.com/metafoxapp/metafox-dev-docs/blob/develop",project:{link:"https://github.com/metafoxapp/metafox-dev-docs"},sidebar:{defaultMenuCollapseLevel:1},useNextSeoProps:()=>({titleTemplate:"%s - MetaFox"}),head:()=>(o.useEffect(()=>{i().initialize({gtmId:"GTM-WB52HRS"})},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,r.jsx)("meta",{property:"og:title",content:"MetaFox"}),(0,r.jsx)("meta",{property:"og:description",content:"MetaFox Developer Documentation"})]})),footer:{text:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("noscript",{children:(0,r.jsx)("iframe",{src:"https://www.googletagmanager.com/ns.html?id=GTM-WB52HRS",height:"0",width:"0",style:{display:"none",visibility:"hidden"}})}),(0,r.jsxs)("span",{children:["Copyright \xa9 2024 \xa0",(0,r.jsx)("a",{href:"https://phpfox.com",target:"_blank",children:"phpFox LLC"}),". All rights reserved."]})]})}};s.Z=t}},function(e){e.O(0,[9774,831,2888,179],function(){return e(e.s=801)}),_N_E=e.O()}]);